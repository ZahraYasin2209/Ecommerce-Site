{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container my-5 py-5">
    <div class="row justify-content-center">
        <div class="col-lg-8 col-md-10">
            <div class="card shadow-lg p-5 border-0 rounded-4 text-center bg-white">

                <div class="mx-auto mb-4 text-white fw-bold"
                     style="width: 80px; height: 80px;
                            background-color: #28a745;
                            border-radius: 50%;
                            display: flex; align-items: center; justify-content: center;
                            font-size: 3rem; line-height: 1;">
                    âœ”
                </div>

                <h2 class="text-success fw-bolder mb-3">Order Placed Successfully!</h2>
                <p class="lead text-muted border-bottom pb-3 mx-auto" style="max-width: 80%;">
                    Thank you, <strong class="text-dark">{{ order.user.username }}</strong>!
                    Your order has been placed and is now being processed securely.
                </p>

                <div class="text-start mt-4 p-4 border rounded-3 bg-light">
                    <h4 class="mb-3 border-bottom pb-2 fw-bold text-dark">
                        <i class="bi bi-receipt me-2 text-dark"></i> Transaction Summary
                    </h4>

                    <div class="row small g-2">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Order ID:</strong> <span class="text-primary fw-bold">#{{ order.id }}</span></p>
                            <p class="mb-1"><strong>Order Total:</strong> <span class="text-dark fw-bold">PKR {{ order.total_amount }}</span></p>
                        </div>

                        {% if payment %}
                        <div class="col-md-6 border-start ps-md-4">
                            <p class="mb-1"><strong>Payment Status:</strong>
                                <span class="badge bg-success fw-bold">{{ payment.status|upper }}</span>
                            </p>
                            <p class="mb-1"><strong>Amount Paid:</strong> PKR {{ payment.amount }}</p>
                        </div>
                        {% endif %}
                    </div>
                </div>

                <div class="text-start mt-4 p-4 border rounded-3 bg-white shadow-sm">
                    <h5 class="mb-3 fw-bold text-dark">
                        <i class="bi bi-truck me-2 text-primary"></i>Shipping To
                    </h5>
                    <p class="mb-1 text-dark fw-semibold">Name: {{ order.shipping_address.recipient_name }}</p>
                    <p class="mb-1 text-muted">Address: {{ order.shipping_address.recipient_address }}</p>
                    <p class="mb-1 text-muted">Postal Code: {{ order.shipping_address.recipient_area_postal_code }}</p>
                    <p class="mb-1 text-muted">Shipping Address: {{ order.shipping_address.recipient_phone_number }}</p>
                    <p class="mb-0 text-muted">Email: {{ order.shipping_address.recipient_email }}</p>
                </div>

                <a href="{% url 'products:category_products' 6 %}" class="btn btn-primary btn-lg mt-5 fw-bold rounded-pill shadow-sm mx-auto" style="width: 70%;">
                    Continue Shopping
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}